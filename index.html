<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rock Paper Scissors</title>
  <style>
    body { font-family: Arial; text-align: center; padding-top: 50px; }
    .hidden { display: none; }
    button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    #results { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Rock Paper Scissors</h1>

  <div id="usernamePrompt">
    <p>Enter your name:</p>
    <input type="text" id="usernameInput" />
    <button onclick="startGame()">Start</button>
  </div>

  <div id="gameArea" class="hidden">
    <h2 id="greeting"></h2>
    <p>Choose your move:</p>
    <button onclick="play('Rock')">Rock</button>
    <button onclick="play('Paper')">Paper</button>
    <button onclick="play('Scissors')">Scissors</button>

    <div id="results"></div>
    <div id="history"></div>
  </div>

  <script>
    let username = "";
    let matchHistory = [];
    const choices = ["Rock", "Paper", "Scissors"];

    function startGame() {
      username = document.getElementById("usernameInput").value.trim();
      if (!username) return alert("Please enter your name.");
      document.getElementById("usernamePrompt").classList.add("hidden");
      document.getElementById("gameArea").classList.remove("hidden");
      document.getElementById("greeting").textContent = `Welcome, ${username}!`;
    }

    function getBotMove() {
      return choices[Math.floor(Math.random() * 3)];
    }

    function determineWinner(player, bot) {
      if (player === bot) return "Draw";
      if ((player === "Rock" && bot === "Scissors") ||
          (player === "Paper" && bot === "Rock") ||
          (player === "Scissors" && bot === "Paper")) return "Win";
      return "Lose";
    }

    function play(playerMove) {
      const botMove = getBotMove();
      const result = determineWinner(playerMove, botMove);
      const match = { player: playerMove, bot: botMove, result };
      matchHistory.push(match);

      document.getElementById("results").innerHTML = `
        <p>You chose: <strong>${playerMove}</strong></p>
        <p>Bot chose: <strong>${botMove}</strong></p>
        <p>Result: <strong>${result}</strong></p>
      `;

      updateHistory();
      sendDataToCollector(username, match);
    }

    function updateHistory() {
      let historyHtml = '<h3>Match History</h3><ul>';
      matchHistory.forEach((match, index) => {
        historyHtml += `<li>Game ${index + 1}: You chose ${match.player}, Bot chose ${match.bot} â†’ ${match.result}</li>`;
      });
      historyHtml += '</ul>';
      document.getElementById("history").innerHTML = historyHtml;
    }

function sendDataToCollector(user, match) {
  const formData = new FormData();
  formData.append("entry.374051999", user);               // Username
  formData.append("entry.2112547923", match.player);       // Player Move
  formData.append("entry.239278610", match.bot);           // Bot Move
  formData.append("entry.2075809384", match.result);       // Result

  fetch("https://docs.google.com/forms/d/e/1FAIpQLSdnSrKw9AO5Izyd7IB00i1lUEXBxgIyfXa1BaeOb1qM2H4z8w/formResponse", {
    method: "POST",
    mode: "no-cors",
    body: formData,
  });
}

  </script>
</body>
</html>
